\definemode[imprenta][keep]
\definemode[pantalla][keep]

\definepapersize[libro][width=170mm,height=240mm]
\setuppapersize[libro][libro]

\setuptolerance[tolerant,stretch]

\startsetups[layout:oldstyle]
  \setdefaultpenalties
  \setpenalties\widowpenalties{2}{100000}
  \setpenalties\clubpenalties {2}{100000}
  \doublehyphendemerits=100000
  \finalhyphendemerits=50000
  \adjdemerits=20000
\stopsetups

\startsetups[layout:estricto]
  \setdefaultpenalties
  \setpenalties\widowpenalties{2}{100000}
  \setpenalties\clubpenalties {2}{100000}
  \doublehyphendemerits=50000
  \finalhyphendemerits=100000
  \adjdemerits=30000
\stopsetups

\setuplayout
  [marking=off,
  topspace=5mm,
  height=634pt,
  backspace=30mm,
  width=120mm,
  header=10mm,
  footer=15mm,
  headerdistance=5mm,
  footerdistance=5mm,
  setups=layout:estricto]

\startmode[imprenta]
  \setuppapersize[libro][letter]
  \setuplayout[location=middle, marking=on]
\stopmode

\setupspacing[fixed]
\definemeasure[linea][\baselineskip]
%\showframe
